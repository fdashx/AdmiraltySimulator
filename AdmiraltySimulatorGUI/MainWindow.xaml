<Window x:Class="AdmiraltySimulatorGUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
        xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
        xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
        xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
        mc:Ignorable="d"
        Title="AdmiraltySimulator" Height="350" Width="525">
    <dxmvvm:Interaction.Behaviors>
        <dxmvvm:LayoutSerializationService />
    </dxmvvm:Interaction.Behaviors>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="5" />
            <RowDefinition x:Name="LogRow" />
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="ShipsColumn" />
                <ColumnDefinition Width="5" />
                <ColumnDefinition x:Name="AssignmentColumn" />
                <ColumnDefinition Width="5" />
                <ColumnDefinition x:Name="ResultsColumn" />
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="150" />
                </Grid.ColumnDefinitions>
                <TextBox Grid.Row="0" Grid.Column="0" Text="{Binding ShipFile}" VerticalAlignment="Center"
                         Margin="5,0,0,0" />
                <Button Grid.Row="0" Grid.Column="1" Content="Load Ships Data..."
                        Command="{Binding LoadShipFileCmd}" VerticalAlignment="Center" Margin="0,0,5,0" />
                <dxe:ComboBoxEdit Grid.Row="1" Grid.Column="0" ItemsSource="{Binding Profiles}" DisplayMember="Name"
                                  ValueMember="FilePath" SelectedItem="{Binding SelectedProfile}"
                                  NullText="-- select profile --" AutoComplete="True" ImmediatePopup="True"
                                  IncrementalFiltering="True" VerticalAlignment="Center"
                                  Margin="5,0,0,0" />
                <Button Grid.Row="1" Grid.Column="1" Content="Load Profile"
                        Command="{Binding LoadProfileCmd}" VerticalAlignment="Center" Margin="0,0,5,0" />
                <dxe:TextEdit Grid.Row="2" Grid.Column="0" Text="{Binding NewProfileName}" NullText="new profile name"
                              VerticalAlignment="Center"
                              Margin="5,0,0,0" />
                <Button Grid.Row="2" Grid.Column="1" Content="New Profile" Command="{Binding CreateNewProfileCmd}"
                        VerticalAlignment="Center" Margin="0,0,5,0" />
                <dxg:GridControl Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" ItemsSource="{Binding Ships}"
                                 dx:DXSerializer.StoreLayoutMode="All" dx:DXSerializer.SerializationID="ShipsGrid">
                    <dxg:GridControl.View>
                        <dxg:TableView ShowAutoFilterRow="True" ColumnFilterPopupMode="Excel"
                                       FilterEditorShowOperandTypeIcon="True" ShowCriteriaInAutoFilterRow="True" />
                    </dxg:GridControl.View>
                    <dxg:GridControl.Columns>
                        <dxg:GridColumn FieldName="Name" />
                        <dxg:GridColumn FieldName="IsOwned" />
                        <dxg:GridColumn FieldName="OneTimeUses" />
                        <dxg:GridColumn FieldName="MaintenanceFinish">
                            <dxg:GridColumn.EditSettings>
                                <dxe:DateEditSettings MaskType="DateTime" Mask="g" MaskUseAsDisplayFormat="True">
                                    <dxe:DateEditSettings.StyleSettings>
                                        <dxe:DateEditPickerStyleSettings />
                                    </dxe:DateEditSettings.StyleSettings>
                                </dxe:DateEditSettings>
                            </dxg:GridColumn.EditSettings>
                        </dxg:GridColumn>
                        <dxg:GridColumn FieldName="Type" />
                        <dxg:GridColumn FieldName="Eng" />
                        <dxg:GridColumn FieldName="Tac" />
                        <dxg:GridColumn FieldName="Sci" />
                        <dxg:GridColumn FieldName="Abilities" />
                        <dxg:GridColumn FieldName="Maintenance">
                            <dxg:GridColumn.EditSettings>
                                <dxe:TextEditSettings DisplayFormat="h'h'm'm'" />
                            </dxg:GridColumn.EditSettings>
                        </dxg:GridColumn>
                    </dxg:GridControl.Columns>
                </dxg:GridControl>
            </Grid>
            <GridSplitter Grid.Column="1" HorizontalAlignment="Stretch" />
            <Grid Grid.Column="2" MinHeight="510">
                <Grid.Resources>
                    <Style x:Key="Label" TargetType="TextBlock">
                        <Setter Property="HorizontalAlignment" Value="Right" />
                        <Setter Property="VerticalAlignment" Value="Center" />
                        <Setter Property="Margin" Value="5,0,0,0" />
                    </Style>
                    <Style x:Key="Input" TargetType="TextBox">
                        <Setter Property="VerticalAlignment" Value="Center" />
                        <Setter Property="Margin" Value="5,0,5,0" />
                    </Style>
                    <Style x:Key="Display" TargetType="TextBlock">
                        <Setter Property="HorizontalAlignment" Value="Center" />
                        <Setter Property="VerticalAlignment" Value="Center" />
                    </Style>
                    <Style x:Key="LookUpEditGrid" TargetType="dxg:LookUpEdit">
                        <Setter Property="ImmediatePopup" Value="True" />
                        <Setter Property="VerticalAlignment" Value="Center" />
                        <Setter Property="Margin" Value="5, 0, 5, 0" />
                        <Setter Property="AutoPopulateColumns" Value="False" />
                    </Style>
                </Grid.Resources>
                <Grid.RowDefinitions>
                    <RowDefinition Height="90" />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50" />
                    <ColumnDefinition MinWidth="120" />
                    <ColumnDefinition MinWidth="100" />
                    <ColumnDefinition MinWidth="100" />
                </Grid.ColumnDefinitions>
                <Grid Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="4">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Assignment:" Style="{StaticResource Label}" />
                    <dxg:LookUpEdit Grid.Row="0" Grid.Column="1" ItemsSource="{Binding Assignments}"
                                    DisplayMember="Name" SelectedItem="{Binding SelectedAssignment}"
                                    Style="{StaticResource LookUpEditGrid}">
                        <dxg:LookUpEdit.PopupContentTemplate>
                            <ControlTemplate>
                                <dxg:GridControl x:Name="PART_GridControl">
                                    <dxg:GridControl.View>
                                        <dxg:TableView ShowAutoFilterRow="True" FilterEditorShowOperandTypeIcon="True"
                                                       ShowCriteriaInAutoFilterRow="True" />
                                    </dxg:GridControl.View>
                                    <dxg:GridControl.Columns>
                                        <dxg:GridColumn FieldName="Name" AutoFilterCriteria="Contains" Width="350" />
                                        <dxg:GridColumn FieldName="Faction" Width="50" />
                                        <dxg:GridColumn FieldName="Rarity" Width="75" />
                                        <dxg:GridColumn FieldName="RewardCxp" Header="CXP" Width="50" />
                                        <dxg:GridColumn FieldName="RewardXp" Header="XP" Width="50" />
                                        <dxg:GridColumn FieldName="RewardDilithium" Header="Dilithium" Width="50" />
                                        <dxg:GridColumn FieldName="RewardEc" Header="EC" Width="50" />
                                        <dxg:GridColumn FieldName="RewardOther" Header="Other Rewards" Width="100" />
                                        <dxg:GridColumn FieldName="HasCriticalReward" Header="Critical Rewarding"
                                                        Width="50" />
                                    </dxg:GridControl.Columns>
                                </dxg:GridControl>
                            </ControlTemplate>
                        </dxg:LookUpEdit.PopupContentTemplate>
                    </dxg:LookUpEdit>
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Event:" Style="{StaticResource Label}" />
                    <dxg:LookUpEdit Grid.Row="1" Grid.Column="1" ItemsSource="{Binding Events}" DisplayMember="Name"
                                    SelectedItem="{Binding SelectedEvent}" Style="{StaticResource LookUpEditGrid}">
                        <dxg:LookUpEdit.PopupContentTemplate>
                            <ControlTemplate>
                                <dxg:GridControl x:Name="PART_GridControl">
                                    <dxg:GridControl.View>
                                        <dxg:TableView ShowAutoFilterRow="True" FilterEditorShowOperandTypeIcon="True"
                                                       ShowCriteriaInAutoFilterRow="True" />
                                    </dxg:GridControl.View>
                                    <dxg:GridControl.Columns>
                                        <dxg:GridColumn FieldName="Name" AutoFilterCriteria="Contains" Width="200" />
                                        <dxg:GridColumn FieldName="Reward" Width="200" />
                                        <dxg:GridColumn FieldName="RewardEc" Header="EC" Width="50" />
                                        <dxg:GridColumn FieldName="RewardDilithium" Header="Dilithium" Width="50" />
                                    </dxg:GridControl.Columns>
                                </dxg:GridControl>
                            </ControlTemplate>
                        </dxg:LookUpEdit.PopupContentTemplate>
                    </dxg:LookUpEdit>
                </Grid>
                <Separator Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="4" VerticalAlignment="Top" />
                <TextBlock Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Text="Reward multiplier when critical:"
                           Style="{StaticResource Label}" />
                <TextBox Grid.Row="1" Grid.Column="2" Text="{Binding CritRewardMult}" Style="{StaticResource Input}" />
                <TextBlock Grid.Row="2" Grid.Column="1" Text="Base Required" Style="{StaticResource Display}" />
                <TextBlock Grid.Row="2" Grid.Column="2" Text="Event Mod" Style="{StaticResource Display}" />
                <TextBlock Grid.Row="2" Grid.Column="3" Text="Slotted/Required" Style="{StaticResource Display}" />
                <TextBlock Grid.Row="3" Grid.Column="0" Text="Eng:" Style="{StaticResource Label}" />
                <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding EngReq}" Style="{StaticResource Input}" />
                <TextBox Grid.Row="3" Grid.Column="2" Text="{Binding EngMod}" Style="{StaticResource Input}" />
                <TextBlock Grid.Row="3" Grid.Column="3" Text="{Binding EngSlot}" Style="{StaticResource Display}" />
                <TextBlock Grid.Row="4" Grid.Column="0" Text="Tac:" Style="{StaticResource Label}" />
                <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding TacReq}" Style="{StaticResource Input}" />
                <TextBox Grid.Row="4" Grid.Column="2" Text="{Binding TacMod}" Style="{StaticResource Input}" />
                <TextBlock Grid.Row="4" Grid.Column="3" Text="{Binding TacSlot}" Style="{StaticResource Display}" />
                <TextBlock Grid.Row="5" Grid.Column="0" Text="Sci:" Style="{StaticResource Label}" />
                <TextBox Grid.Row="5" Grid.Column="1" Text="{Binding SciReq}" Style="{StaticResource Input}" />
                <TextBox Grid.Row="5" Grid.Column="2" Text="{Binding SciMod}" Style="{StaticResource Input}" />
                <TextBlock Grid.Row="5" Grid.Column="3" Text="{Binding SciSlot}" Style="{StaticResource Display}" />
                <TextBlock Grid.Row="6" Grid.Column="0" Text="Total:" Style="{StaticResource Label}" />
                <TextBlock Grid.Row="6" Grid.Column="3" Text="{Binding TotalSlot}" Style="{StaticResource Display}" />
                <Separator Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="4" VerticalAlignment="Bottom" />
                <TextBlock Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="2" Text="Bonus critical from event:"
                           Style="{StaticResource Label}" />
                <TextBox Grid.Row="7" Grid.Column="2" Text="{Binding EventCrit}" Style="{StaticResource Input}" />
                <TextBlock Grid.Row="8" Grid.Column="0" Grid.ColumnSpan="2" Text="Total critical rating:"
                           Style="{StaticResource Label}" />
                <TextBlock Grid.Row="8" Grid.Column="2" Text="{Binding TotalCrit}" Style="{StaticResource Display}" />
                <Separator Grid.Row="8" Grid.Column="0" Grid.ColumnSpan="4" VerticalAlignment="Bottom" />
                <TextBlock Grid.Row="9" Grid.Column="0" Grid.ColumnSpan="2" Text="Maintenance off from event:"
                           Style="{StaticResource Label}" />
                <TextBox Grid.Row="9" Grid.Column="2" Text="{Binding EventMaintOff}" Style="{StaticResource Input}" />
                <TextBlock Grid.Row="10" Grid.Column="0" Grid.ColumnSpan="2" Text="Assignment duration:"
                           Style="{StaticResource Label}" />
                <TextBox Grid.Row="10" Grid.Column="2" Text="{Binding Duration}" Style="{StaticResource Input}" />
                <TextBlock Grid.Row="11" Grid.Column="0" Grid.ColumnSpan="2" Text="Use One Time Ships:"
                           Style="{StaticResource Label}" />
                <CheckBox Grid.Row="11" Grid.Column="2" IsChecked="{Binding UseOneTimeShips}"
                          VerticalAlignment="Center" HorizontalAlignment="Center" />
                <TextBlock Grid.Row="12" Grid.Column="0" Grid.ColumnSpan="2" Text="Total Maintenance:"
                           Style="{StaticResource Label}" />
                <TextBlock Grid.Row="12" Grid.Column="2" Text="{Binding TotalMaint}" Style="{StaticResource Display}" />
                <Separator Grid.Row="12" Grid.Column="0" Grid.ColumnSpan="4" VerticalAlignment="Bottom" />
                <TextBlock Grid.Row="13" Grid.Column="0" Grid.ColumnSpan="2" Text="Success:"
                           Style="{StaticResource Label}" />
                <TextBlock Grid.Row="13" Grid.Column="2" Text="{Binding SuccessChance}"
                           Style="{StaticResource Display}" />
                <TextBlock Grid.Row="14" Grid.Column="0" Grid.ColumnSpan="2" Text="Critical:"
                           Style="{StaticResource Label}" />
                <TextBlock Grid.Row="14" Grid.Column="2" Text="{Binding CritChance}" Style="{StaticResource Display}" />
                <TextBlock Grid.Row="15" Grid.Column="0" Grid.ColumnSpan="3" Text="{Binding SelectedShips[0]}"
                           Style="{StaticResource Display}" />
                <TextBlock Grid.Row="15" Grid.Column="3" Text="{Binding SelectedShipsMaint[0]}"
                           Style="{StaticResource Display}" />
                <TextBlock Grid.Row="16" Grid.Column="0" Grid.ColumnSpan="3" Text="{Binding SelectedShips[1]}"
                           Style="{StaticResource Display}" />
                <TextBlock Grid.Row="16" Grid.Column="3" Text="{Binding SelectedShipsMaint[1]}"
                           Style="{StaticResource Display}" />
                <TextBlock Grid.Row="17" Grid.Column="0" Grid.ColumnSpan="3" Text="{Binding SelectedShips[2]}"
                           Style="{StaticResource Display}" />
                <TextBlock Grid.Row="17" Grid.Column="3" Text="{Binding SelectedShipsMaint[2]}"
                           Style="{StaticResource Display}" />
                <Button Grid.Row="18" Grid.Column="0" Grid.ColumnSpan="2" Content="Save Changes"
                        Command="{Binding SaveChangeCmd}" />
                <Button Grid.Row="18" Grid.Column="2" Content="Simulate" Command="{Binding SimulateCmd}" />
                <Button Grid.Row="18" Grid.Column="3" Content="Execute" Command="{Binding ExecuteCmd}" />
            </Grid>
            <GridSplitter Grid.Column="3" HorizontalAlignment="Stretch" />
            <dxg:GridControl x:Name="ResultsGrid" Grid.Column="4" ItemsSource="{Binding Results}"
                             SelectedItem="{Binding SelectedResult}" dx:DXSerializer.StoreLayoutMode="All"
                             dx:DXSerializer.SerializationID="ResultsGrid">
                <dxg:GridControl.View>
                    <dxg:TableView ShowAutoFilterRow="True" ColumnFilterPopupMode="Excel"
                                   FilterEditorShowOperandTypeIcon="True" ShowCriteriaInAutoFilterRow="True" />
                </dxg:GridControl.View>
                <dxg:GridControl.Columns>
                    <dxg:GridColumn FieldName="Success" />
                    <dxg:GridColumn FieldName="CritChance" />
                    <dxg:GridColumn FieldName="RewardFactor" />
                    <dxg:GridColumn FieldName="TotalDiff" />
                    <dxg:GridColumn FieldName="TotalMaint">
                        <dxg:GridColumn.EditSettings>
                            <dxe:TextEditSettings DisplayFormat="d'd'h'h'm'm'" />
                        </dxg:GridColumn.EditSettings>
                    </dxg:GridColumn>
                    <dxg:GridColumn FieldName="Ships" />
                    <dxg:GridColumn FieldName="ShipsMaint" />
                    <dxg:GridColumn FieldName="EngRequired" />
                    <dxg:GridColumn FieldName="TacRequired" />
                    <dxg:GridColumn FieldName="SciRequired" />
                    <dxg:GridColumn FieldName="EngSlotted" />
                    <dxg:GridColumn FieldName="TacSlotted" />
                    <dxg:GridColumn FieldName="SciSlotted" />
                    <dxg:GridColumn FieldName="TotalSlotted" />
                    <dxg:GridColumn FieldName="EngEventMod" />
                    <dxg:GridColumn FieldName="TacEventMod" />
                    <dxg:GridColumn FieldName="SciEventMod" />
                    <dxg:GridColumn FieldName="EngDiff" />
                    <dxg:GridColumn FieldName="TacDiff" />
                    <dxg:GridColumn FieldName="SciDiff" />
                    <dxg:GridColumn FieldName="EngCritMult" />
                    <dxg:GridColumn FieldName="TacCritMult" />
                    <dxg:GridColumn FieldName="SciCritMult" />
                    <dxg:GridColumn FieldName="EventCritMult" />
                    <dxg:GridColumn FieldName="TotalCrit" />
                    <dxg:GridColumn FieldName="MaintOff" />
                    <dxg:GridColumn FieldName="Custom" UnboundType="Decimal" AllowUnboundExpressionEditor="True" />
                </dxg:GridControl.Columns>
            </dxg:GridControl>
        </Grid>
        <GridSplitter Grid.Row="1" HorizontalAlignment="Stretch" />
        <ListBox Grid.Row="2" ItemsSource="{Binding Logger.Logs}" />
    </Grid>
</Window>